!function(){if(!window.jOperation){var a=$(window),u={debug:!1,elem:"[data-operation-track]",param:"data-operation-param",extend:"data-operation-extend",click:"data-operation-click"};"undefined"!=typeof jOperationConfig&&(u=$.extend({},u,jOperationConfig));function p(e){u.debug&&console&&console.log&&console.log("[operation debug]:",e)}function e(t,n,o){var r=null,a=null;n=n||500,o=o||1e3;return function(){var e=(new Date).getTime();o<e-(a=a||e)?(t(),a=e):(clearTimeout(r),r=setTimeout(function(){t()},n))}}function c(e){var t=a.scrollTop(),n=$(e),o=n.offset().top,r="function"==typeof Zepto?n.height():n.outerHeight(!0);return o<=t+d.winHeight&&t<=o+r}function n(e,t){e.each(function(e,t){var n=$(this),o=n.attr("data-operation-loaded");if(void 0===o||"0"===o||null===o){var r=n.attr(u.param),a=n.attr(u.extend);d.elem.push(t),d.requestArray.push(0),d.visibleExposureArray.push(0),d.itemParamArr.push(r),d.itemExtendArr.push(a);var i=n,c=n.attr(u.click);c&&(i=n.find(c)),f(i,r,a),n.attr("data-operation-loaded","1")}}),p(d),t&&"function"==typeof t&&t()}function o(){$(d.elem).each(function(e){0===d.requestArray[e]&&(v(d.itemParamArr[e],d.itemExtendArr[e],i),d.requestArray.splice(e,1,1))})}function r(){var e=d.visibleExposureArray.length,t=0;d.visibleExposureArray.filter(function(e){return 1===e&&(t+=1),t}),e!==t&&$(d.elem).each(function(e,t){c(t)&&0===d.visibleExposureArray[e]&&(v(d.itemParamArr[e],d.itemExtendArr[e],s),d.visibleExposureArray.splice(e,1,1))})}var i="operation_req_show",s="operation_sight_show",l="operation_click",d={requestArray:[],visibleExposureArray:[],elem:[],winHeight:a.height(),itemParamArr:[],itemExtendArr:[]},f=function(e,t,n){$(e).on("click",function(){v(t,n,l,"click")})},m=0,v=function(t,n,e,o){"undefined"==typeof trackCustomEvent&&0===m&&(console.warn("[operation]: trackCustomEvent is undefined! \u6570\u636e\u5c06\u65e0\u6cd5\u4e0a\u62a5\uff01"),m=!m);var r={biz:"auto",type:o||"show",action:e||"operation_sight_show",ctime:Date.now(),area:"top",element:"page",pmark:"0"},a="undefined"!=typeof trackCommonObj?trackCommonObj:{},i={};if(void 0!==t)try{i=JSON.parse(t)}catch(e){console.warn("[operation]: \u80fd\u7528\u53c2\u6570\u683c\u5f0f\u4e0d\u662f JSON \u5b57\u7b26\u4e32\uff01->",t)}var c=$.extend({},r,a,i),u={};try{u=JSON.parse(n)}catch(e){console.warn("[operation]: \u6269\u5c55\u53c2\u6570\u683c\u5f0f\u4e0d\u662f JSON \u5b57\u7b26\u4e32\uff01->",n)}"undefined"!=typeof trackCustomEvent&&trackCustomEvent("auto_common_event",c,u),p(c),p(u)};n($(u.elem),function(){o(),r()}),a.on("scroll.fe.operation",e(function(){r()})),a.on("resize.fe.operation",e(function(){d.winHeight=a.height(),r()})),window.jOperation={version:"0.0.4",init:function(e){var t=$(e).not(u.elem);0!==t.length&&n(t,function(){o(),r(),a.trigger("scroll")})},sendRequest:function(e){var t=$(e);0!==t.length&&t.each(function(){var e=$(this),t=e.attr("data-operation-loaded");if(void 0===t||"0"===t||null===t){var n=e.attr(u.param),o=e.attr(u.extend);v(n,o,i);var r=e,a=e.attr(u.click);a&&(r=e.find(a)),f(r,n,o),e.attr("data-operation-loaded","1")}})},sendVisibleExposure:function(e,t){if(e){var n=t||0,o=$(e).eq(n);if(c(o)){var r=o.attr("data-operation-exposure"),a=o.attr(u.param),i=o.attr(u.extend);void 0!==r&&"0"!==r&&null!==r||(v(a,i,s),o.attr("data-operation-exposure","1"))}}}}}}(window);