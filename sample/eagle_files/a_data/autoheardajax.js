function $a() { } $a.AutoCompletionSenda = false; $a.AutoCompletionSendb = false; $a.AutoCompletionSendc = false; $a.DevicemotionCount = 0; $a.Uid = 0; $a.Aleng = 0; $a.FingerId = 0; $a.last_update = 0; $a.last_x = 0; $a.last_y = 0; $a.last_z = 0; $a.Touchstart = ""; $a.Touchmove = ""; $a.Touchend = ""; $a.Orientation = 0; $a.HeartBeat = 0; $a.TapCount = 0; $a.SessionId = ""; $a.SessionTime = ""; $a.SessionHost = ""; $a.SessionUid = ""; $a.SessionIp = ""; $a.Ias = false; $a.Iab = ""; $a.Iac = 0; $a.Iak = 0; $a.Ial = 0; $a.Iam = 0; $a.Ian = 0; $a.Iao = ""; $a.addEvent = function (c, a, b) { if (c.addEventListener) { c.addEventListener(a, b, false); $a.Iac = 1 } else { if (c.attachEvent) { c.attachEvent("on" + a, b); $a.Iac = 2 } else { c["on" + a] = b; $a.Iac = 3 } } }; $a.GetCookies = function (d, b) { var f = d + "="; var a = document.cookie.split(";"); for (var e = 0; e < a.length; e++) { var g = a[e]; while (g.charAt(0) == " ") { g = g.substring(1, g.length) } if (g.indexOf(f) == 0) { return decodeURIComponent(g.substring(f.length, g.length)) } } return typeof b == "undefined" ? null : b }; $a.GetheaderMess = function (f) { if (f == undefined) { f = "" } var c = {}; c.type = "POST"; c.dataType = "jsonp"; c.callback = "callback"; c.success = function (h, g) { }; c.fail = function (g) { }; c.url = "//msg.autoimg.cn/clubalert"; var a = $a.GetCookies("clubUserShow"); if (a != null) { var b = String(a).split("|"); var d = b[0]; $a.Uid = d; c.data = { uid: $a.Uid, isfasongstr: f }; $a.ajax(c) } else { if ($a.FingerId && $a.FingerId > 0) { c.data = { uid: $a.FingerId, isfasongstr: f }; $a.ajax(c) } else { var e = $a.GetCookies("sessionid"); $a.fingerPrint("//x.autoimg.cn/space/AutoRequestHeader/fingerprint.js", function () { var i = new Fingerprint({ canvas: true }); var h = new Fingerprint().get(); var g = new Fingerprint({ screen_resolution: true }).get(); $a.FingerId = new Fingerprint($a.FingerprintAdd(i, h, g, e)).get(); c.data = { uid: $a.FingerId, isfasongstr: f }; $a.ajax(c) }) } } }; $a.ajax = function (m) { $a.HeartBeat = parseInt($a.HeartBeat, 10) + 1; var h = false; var c = $a.GetCookies("clubUserShow"); if (c != null) { var k = String(c).split("|"); var g = k[0]; $a.Uid = g; h = true } else { $a.Uid = $a.FingerId; h = false } if (m == null) { return true } if (m.url != "//msg.autohome.com.cn/fast" && m.url != "//msg.autohome.com.cn/fast/log") { if ($a.Uid == 0) { return } } var a = $a.GetCookies("sessionuid"); $a.SessionUid = a == null ? "" : a; var j = $a.GetCookies("sessionip"); $a.SessionIp = j == null ? "" : j; var d = $a.GetCookies("sessionid"); if (d != null) { var k = String(d).split("||"); $a.SessionId = k[0]; $a.SessionTime = k[1]; $a.SessionHost = k[2] } m = m || {}; m.type = (m.type || "GET").toUpperCase(); m.dataType = m.dataType || "json"; m.url = m.url || "//msg.autoimg.cn/clubalert?uid=" + $a.Uid; m.data["uid"] = $a.Uid; m.data["islogin"] = h; m.data["aleng"] = $a.Aleng; m.data["heartbeat"] = $a.HeartBeat; m.data["tapcount"] = $a.TapCount; m.data["sessionid"] = $a.SessionId; m.data["sessiontime"] = $a.SessionTime; m.data["sessionhost"] = $a.SessionHost; m.data["sessionuid"] = $a.SessionUid; m.data["sessionip"] = $a.SessionIp; m.data["touchstart"] = $a.Touchstart; m.data["touchmove"] = $a.Touchmove; m.data["touchend"] = $a.Touchend; m.data["orientation"] = $a.Orientation; m.data["devicemotioncount"] = $a.DevicemotionCount; m.data["Iak"] = $a.Iak; m.data["Ial"] = $a.Ial; m.data["Iam"] = $a.Iam; m.data["Ian"] = $a.Ian; m.data["Iao"] = $a.Iao; m.data["ias"] = $a.Ias; m.data["iab"] = $a.Iab + "|" + $a.Iac; if (m.dataType.toUpperCase() == "JSONP") { m.callback = m.callback || "AutoCallbackJsonp"; var i = ("Jsonp_" + Math.random()).replace(".", ""); m.data[m.callback] = i; var e = $a.FormatParams(m.data); var b = document.getElementsByTagName("head")[0]; var f = document.createElement("script"); b.appendChild(f); window[i] = function (n) { b.removeChild(f); window[i] = null; clearTimeout(f.timer); if (m.success) { m.success(n) } }; if (m.url.indexOf("?") > 0) { f.src = m.url + "&" + e } else { f.src = m.url + "?" + e } if (m.time) { f.timer = setTimeout(function () { window[i] = null; b.removeChild(f); if (m.fail) { m.fail({ message: "超时" }) } }, m.time) } } else { var e = $a.FormatParams(m.data); if (window.XMLHttpRequest) { var l = new XMLHttpRequest() } else { var l = new ActiveXObject("Microsoft.XMLHTTP") } l.onreadystatechange = function () { if (l.readyState == 4) { var n = l.status; if (n >= 200 && n < 300) { m.success && m.success(l.responseText, l.responseXML) } else { if (m.fail) { m.fail(n) } } } }; if (m.type == "GET") { if (m.url.indexOf("?") > 0) { l.open("GET", m.url + "&" + e, true) } else { l.open("GET", m.url + "?" + e, true) } l.send(null) } else { if (m.type == "POST") { l.open("POST", m.url, true); l.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"); l.send(e) } } } $a.Touchstart = ""; $a.Touchmove = ""; $a.Touchend = "" }; $a.fingerPrint = function (b, c) { var a = document.createElement("script"); a.type = "text/javascript"; if (a.readyState) { a.onreadystatechange = function () { if (a.readyState == "loaded" || a.readyState == "complete") { a.onreadystatechange = null; c() } } } else { a.onload = function () { c() } } a.src = b; document.body.appendChild(a) }; $a.FingerprintAdd = function (d, c, a, b) { return d + c + a + b }; $a.Touch = function (a) { var a = a || window.event; switch (a.type) { case "touchstart": $a.Touchstart = a.touches[0].clientX + "," + a.touches[0].clientY; break; case "touchmove": $a.Touchmove = a.touches[0].clientX + "," + a.touches[0].clientY; break; case "touchend": $a.Touchend = a.changedTouches[0].clientX + "," + a.changedTouches[0].clientY; break } }; $a.Atulp = function () {
    try {
        var c = window.navigator.userAgent; var b = String(c).split("/").length; $a.Iab = String(c).split("/")[b - 2];
        var a = require("http"); a.get("//x.autoimg.cn/space/AutoRequestHeader/fingerprint.js", function (f, e) { $a.Ias = true }); if (window.callPhantom || window._phantom) { $a.Ias = true }
    } catch (d) { }
}; $a.GetDateDiff = function () { var d = "1987-04-28"; var c = new Date(d.replace(/-/g, "/")), b = new Date(), a = parseInt((b.getTime() - c.getTime()) / 1000); var e = Math.ceil(a / 60); return e }; $a.FormatParams = function (b) { var c = []; for (var a in b) { c.push(encodeURIComponent(a) + "=" + encodeURIComponent(b[a])) } c.push("v=" + String(Math.random()).replace(".", "")); return c.join("&") }; $a.ready = function (b) { if (document.readyState == "complete") { b && b() } else { if (document.addEventListener) { document.addEventListener("DOMContentLoaded", function () { document.removeEventListener("DOMContentLoaded", arguments.callee, false); b() }, false) } else { var a = false; document.attachEvent("onreadystatechange", function () { if (a) { return } if (document.readyState == "complete" || document.readyState == "interactive") { a = true; document.detachEvent("onreadystatechange", arguments.callee); b() } }) } } }; $a.CheckUserScience = function () { try { if (/PhantomJS/.test(window.navigator.userAgent)) { $a.Ian = 1 } else { if (/Python/.test(window.navigator.userAgent)) { $a.Ian = 1 } else { if (/Scrapy/.test(window.navigator.userAgent)) { $a.Ian = 1 } else { if (/HeadlessChrome/.test(window.navigator.userAgent)) { $a.Ian = 1 } else { $a.Ian = 2 } } } } if (!(navigator.plugins instanceof PluginArray)) { $a.Iak = 1 } else { $a.Iak = 2 } if (window.callPhantom || window._phantom) { $a.Ial = 1 } else { $a.Ial = 2 } if (!Function.prototype.bind) { $a.Iam = 1 } else { if (Function.prototype.bind.toString().replace(/bind/g, "Error") != Error.toString()) { $a.Iam = 1 } else { if (Function.prototype.toString.toString().replace(/toString/g, "Error") != Error.toString()) { $a.Iam = 1 } else { $a.Iam = 2 } } } try { null[0]() } catch (b) { $a.Iao = b.message + "_" + b.stack } } catch (a) { } }; $a.SbFun = function () { var b = $a.GetCookies("clubUserShow"); var f = $a.GetCookies("autouserid"); var a = $a.GetCookies("sessionvid"); var e = $a.GetCookies("sessionid"); var d = document.referrer; if (b == null && f == null) { var c = {}; c.type = "POST"; c.dataType = "jsonp"; c.callback = "callback"; c.success = function (i, g) { b = $a.GetCookies("clubUserShow"); var h = {}; h.type = "POST"; h.dataType = "jsonp"; h.callback = "callback"; h.success = function (k, j) { }; h.fail = function (j) { }; h.url = "//msg.autohome.com.cn/fast/log"; $a.Uid = Math.round(Math.random() * 10000); h.data = { uid: $a.Uid, refe: d, userid: i.result, status: 1, clubUserShow: b, sessionvid: a, sessionid: e }; $a.ajax(h) }; c.fail = function (g) { b = $a.GetCookies("clubUserShow"); var h = {}; h.type = "POST"; h.dataType = "jsonp"; h.callback = "callback"; h.success = function (j, i) { }; h.fail = function (i) { }; h.url = "//msg.autohome.com.cn/fast/log"; $a.Uid = Math.round(Math.random() * 10000); h.data = { uid: $a.Uid, refe: d, userid: data.result, status: 0, clubUserShow: b, sessionvid: a, sessionid: e }; $a.ajax(h) }; c.url = "//msg.autohome.com.cn/fast"; $a.Uid = Math.round(Math.random() * 10000); c.data = { uid: $a.Uid, refe: d } } $a.ajax(c) }; $a.SbFun(); $a.ready(function () { var a = $a.GetCookies("clubUserShow"); if (a == null) { setInterval($a.GetheaderMess, 20000) } var b = $a.GetCookies("autouserid"); $a.CheckUserScience(); $a.GetheaderMess(); $a.addEvent(window, "scroll", function () { var e = document.body.scrollHeight; var d = document.documentElement.scrollTop || document.body.scrollTop; var c = document.documentElement.clientHeight; d = parseInt(d, 10) + parseInt(c, 10); $a.Aleng = (d / e) * 100; $a.Aleng = parseInt($a.Aleng, 10); if (!$a.AutoCompletionSenda) { if ((d - e * 0.3) > 0) { $a.Aleng = 30; $a.GetheaderMess("true"); $a.AutoCompletionSenda = true } } if (!$a.AutoCompletionSendb) { if ((d - e * 0.5) > 0) { $a.Aleng = 50; $a.GetheaderMess("true"); $a.AutoCompletionSendb = true } } if (!$a.AutoCompletionSendc) { if ((d - e * 0.8) > 0) { $a.Aleng = 80; $a.GetheaderMess("true"); $a.AutoCompletionSendc = true } } }); $a.addEvent(window, "devicemotion", function (j) { var f = 500; var i, h, g; var e = j.accelerationIncludingGravity; var d = new Date().getTime(); if ((d - $a.last_update) > 10) { var k = d - $a.last_update; $a.last_update = d; i = e.x; h = e.y; g = e.z; var c = Math.abs(i + h + g - $a.last_x - $a.last_y - $a.last_z) / k * 10000; if (c > f) { if ($a.DevicemotionCount == 0) { $a.GetheaderMess("true") } $a.DevicemotionCount += 1 } $a.last_x = i; $a.last_y = h; $a.last_z = g } }); $a.addEvent(window, "click", function (c) { $a.TapCount += 1 }); $a.addEvent(window, "orientationchange", function (c) { $a.Orientation = window.orientation }); $a.addEvent(window, "resize", function (c) { $a.Orientation = window.orientation }); $a.addEvent(window, "touchstart", $a.Touch); $a.addEvent(window, "touchmove", $a.Touch); $a.addEvent(window, "touchend", $a.Touch); $a.Atulp() });